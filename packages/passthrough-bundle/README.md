# @civic/passthrough-bundle

A bundled version of the passthrough MCP server that includes all built-in hooks and supports dynamic hook loading.

## Overview

This package combines:
- `@civic/passthrough-mcp-server` - The core passthrough proxy functionality
- Built-in hooks - All standard hooks pre-bundled for easy access
- Dynamic hook loading - Load hooks by name or URL

## Installation

```bash
npm install -g @civic/passthrough-bundle
# or
pnpm add -g @civic/passthrough-bundle
```

## Usage

### Command Line

```bash
# With a configuration file
CONFIG_FILE=./mcphooks.config.json passthrough-bundle

# With Docker
docker run -v $(pwd)/mcphooks.config.json:/app/config/mcphooks.config.json \
  civicteam/passthrough-bundle:latest
```

### Configuration Format

The bundle expects a configuration file in the format generated by `@civic/passthrough-proxy-builder`:

```json
{
  "target": {
    "command": "node server.js"
  },
  "proxy": {
    "port": 8080,
    "transport": "httpStream"
  },
  "hooks": [
    { "name": "AuditHook" },
    { "name": "SimpleLogHook" },
    { "url": "http://localhost:5000", "name": "CustomHook" }
  ]
}
```

### Built-in Hooks

The following hooks are bundled and can be referenced by name:
- `SimpleLogHook` - Logs all tool calls
- `AuditHook` - Records tool usage for auditing
- `GuardrailHook` - Blocks potentially dangerous operations
- `CustomDescriptionHook` - Modifies tool descriptions
- `ExplainHook` - Adds explanations to tool responses

### Docker Usage

```yaml
version: '3.8'

services:
  mcp-proxy:
    image: civicteam/passthrough-bundle:latest
    container_name: mcp-proxy
    ports:
      - "8080:8080"
    volumes:
      - ./mcphooks.config.json:/app/config/mcphooks.config.json:ro
    environment:
      - NODE_ENV=production
      - CONFIG_FILE=/app/config/mcphooks.config.json
      - PORT=8080
    restart: unless-stopped
```

## Development

```bash
# Install dependencies
pnpm install

# Build
pnpm build

# Run tests
pnpm test

# Build Docker image
pnpm docker:build
```

## License

MIT